<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Switchtec Userspace: /home/exchange/microsemi/switchtec-user/lib/mfg.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Switchtec Userspace
   &#160;<span id="projectnumber">PROJECT_NUMBER =  PROJECT_NUMBER=PROJECT_NUMBER =  2.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">mfg.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Switchtec core library functions for mfg operations.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;switchtec_priv.h&quot;</code><br />
<code>#include &quot;<a class="el" href="switchtec_8h_source.html">switchtec/switchtec.h</a>&quot;</code><br />
<code>#include &quot;switchtec/mfg.h&quot;</code><br />
<code>#include &quot;switchtec/errors.h&quot;</code><br />
<code>#include &quot;switchtec/endian.h&quot;</code><br />
<code>#include &quot;switchtec/mrpc.h&quot;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;lib/crc.h&quot;</code><br />
<code>#include &quot;config.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for mfg.c:</div>
<div class="dyncontent">
<div class="center"><img src="mfg_8c__incl.png" border="0" usemap="#_2home_2exchange_2microsemi_2switchtec-user_2lib_2mfg_8c" alt=""/></div>
<map name="_2home_2exchange_2microsemi_2switchtec-user_2lib_2mfg_8c" id="_2home_2exchange_2microsemi_2switchtec-user_2lib_2mfg_8c">
<area shape="rect" id="node3" href="switchtec_8h.html" title="Main Switchtec header. " alt="" coords="334,95,490,121"/>
<area shape="rect" id="node4" href="mrpc_8h_source.html" title="mrpc.h" alt="" coords="232,169,299,196"/>
<area shape="rect" id="node12" href="mfg_8h_source.html" title="switchtec/mfg.h" alt="" coords="729,95,852,121"/>
<area shape="rect" id="node13" href="errors_8h_source.html" title="switchtec/errors.h" alt="" coords="877,95,1011,121"/>
<area shape="rect" id="node14" href="endian_8h_source.html" title="switchtec/endian.h" alt="" coords="514,95,654,121"/>
<area shape="rect" id="node18" href="crc_8h_source.html" title="lib/crc.h" alt="" coords="153,95,223,121"/>
<area shape="rect" id="node5" href="bind_8h_source.html" title="bind.h" alt="" coords="323,169,384,196"/>
<area shape="rect" id="node7" href="portable_8h_source.html" title="portable.h" alt="" coords="667,169,754,196"/>
<area shape="rect" id="node8" href="registers_8h_source.html" title="registers.h" alt="" coords="501,169,592,196"/>
</map>
</div>
</div>
<p><a href="mfg_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga042020afd002c93758cef40134671a88"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mfg.html#ga042020afd002c93758cef40134671a88">switchtec_sn_ver_get</a> (struct switchtec_dev *dev, struct <a class="el" href="structswitchtec__sn__ver__info.html">switchtec_sn_ver_info</a> *info)</td></tr>
<tr class="memdesc:ga042020afd002c93758cef40134671a88"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get serial number and security version.  <a href="group__mfg.html#ga042020afd002c93758cef40134671a88">More...</a><br /></td></tr>
<tr class="separator:ga042020afd002c93758cef40134671a88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaec8067cf761522f2a7e071c2886e8f1d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mfg.html#gaec8067cf761522f2a7e071c2886e8f1d">switchtec_security_config_get</a> (struct switchtec_dev *dev, struct <a class="el" href="structswitchtec__security__cfg__state.html">switchtec_security_cfg_state</a> *state)</td></tr>
<tr class="memdesc:gaec8067cf761522f2a7e071c2886e8f1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get secure boot configurations.  <a href="group__mfg.html#gaec8067cf761522f2a7e071c2886e8f1d">More...</a><br /></td></tr>
<tr class="separator:gaec8067cf761522f2a7e071c2886e8f1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaea44932bf821c6a12e3f78241999f2cd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mfg.html#gaea44932bf821c6a12e3f78241999f2cd">switchtec_mailbox_to_file</a> (struct switchtec_dev *dev, int fd)</td></tr>
<tr class="memdesc:gaea44932bf821c6a12e3f78241999f2cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve mailbox entries.  <a href="group__mfg.html#gaea44932bf821c6a12e3f78241999f2cd">More...</a><br /></td></tr>
<tr class="separator:gaea44932bf821c6a12e3f78241999f2cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga680200147ac9ae6793f356101501f5ca"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mfg.html#ga680200147ac9ae6793f356101501f5ca">switchtec_security_config_set</a> (struct switchtec_dev *dev, struct <a class="el" href="structswitchtec__security__cfg__set.html">switchtec_security_cfg_set</a> *setting)</td></tr>
<tr class="memdesc:ga680200147ac9ae6793f356101501f5ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set secure settings.  <a href="group__mfg.html#ga680200147ac9ae6793f356101501f5ca">More...</a><br /></td></tr>
<tr class="separator:ga680200147ac9ae6793f356101501f5ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2f9860f5118d25fd75e2929c3cfcc1bd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mfg.html#ga2f9860f5118d25fd75e2929c3cfcc1bd">switchtec_active_image_index_get</a> (struct switchtec_dev *dev, struct <a class="el" href="structswitchtec__active__index.html">switchtec_active_index</a> *index)</td></tr>
<tr class="memdesc:ga2f9860f5118d25fd75e2929c3cfcc1bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get active image index.  <a href="group__mfg.html#ga2f9860f5118d25fd75e2929c3cfcc1bd">More...</a><br /></td></tr>
<tr class="separator:ga2f9860f5118d25fd75e2929c3cfcc1bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaccc3fe0d3cd6f44a251f0184b41b5cdb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mfg.html#gaccc3fe0d3cd6f44a251f0184b41b5cdb">switchtec_active_image_index_set</a> (struct switchtec_dev *dev, struct <a class="el" href="structswitchtec__active__index.html">switchtec_active_index</a> *index)</td></tr>
<tr class="memdesc:gaccc3fe0d3cd6f44a251f0184b41b5cdb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set active image index.  <a href="group__mfg.html#gaccc3fe0d3cd6f44a251f0184b41b5cdb">More...</a><br /></td></tr>
<tr class="separator:gaccc3fe0d3cd6f44a251f0184b41b5cdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4c60e5806153aba99246e4752e8c7f94"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mfg.html#ga4c60e5806153aba99246e4752e8c7f94">switchtec_fw_exec</a> (struct switchtec_dev *dev, enum switchtec_bl2_recovery_mode recovery_mode)</td></tr>
<tr class="memdesc:ga4c60e5806153aba99246e4752e8c7f94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Execute the transferred firmware.  <a href="group__mfg.html#ga4c60e5806153aba99246e4752e8c7f94">More...</a><br /></td></tr>
<tr class="separator:ga4c60e5806153aba99246e4752e8c7f94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga45fa0d4c91d7d6b6c5c6da0e4d462735"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mfg.html#ga45fa0d4c91d7d6b6c5c6da0e4d462735">switchtec_boot_resume</a> (struct switchtec_dev *dev)</td></tr>
<tr class="memdesc:ga45fa0d4c91d7d6b6c5c6da0e4d462735"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resume device boot. Note that after calling this function, the current 'dev' pointer is no longer valid. Before making further calls to switchtec library functions, be sure to close this pointer and get a new one by calling <a class="el" href="group__Device.html#ga83afb2d537f84e6d2e7f76ce05ec6a84" title="Open a Switchtec device by string. ">switchtec_open()</a>. Also be sure to check the return value of <a class="el" href="group__Device.html#ga83afb2d537f84e6d2e7f76ce05ec6a84" title="Open a Switchtec device by string. ">switchtec_open()</a> for error, as the device might not be immediately accessible after normal boot process.  <a href="group__mfg.html#ga45fa0d4c91d7d6b6c5c6da0e4d462735">More...</a><br /></td></tr>
<tr class="separator:ga45fa0d4c91d7d6b6c5c6da0e4d462735"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafea60694bd1d016a01c76d4e6d9642ea"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mfg.html#gafea60694bd1d016a01c76d4e6d9642ea">switchtec_secure_state_set</a> (struct switchtec_dev *dev, enum switchtec_secure_state state)</td></tr>
<tr class="memdesc:gafea60694bd1d016a01c76d4e6d9642ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set device secure state.  <a href="group__mfg.html#gafea60694bd1d016a01c76d4e6d9642ea">More...</a><br /></td></tr>
<tr class="separator:gafea60694bd1d016a01c76d4e6d9642ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4586f4079096ad088d4bb34d9f8340cb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mfg.html#ga4586f4079096ad088d4bb34d9f8340cb">switchtec_dbg_unlock</a> (struct switchtec_dev *dev, uint32_t serial, uint32_t ver_sec_unlock, struct <a class="el" href="structswitchtec__pubkey.html">switchtec_pubkey</a> *public_key, struct <a class="el" href="structswitchtec__signature.html">switchtec_signature</a> *signature)</td></tr>
<tr class="memdesc:ga4586f4079096ad088d4bb34d9f8340cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlock firmware debug features.  <a href="group__mfg.html#ga4586f4079096ad088d4bb34d9f8340cb">More...</a><br /></td></tr>
<tr class="separator:ga4586f4079096ad088d4bb34d9f8340cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabafaf69d056cc0fc2527febe6e3b56d0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mfg.html#gabafaf69d056cc0fc2527febe6e3b56d0">switchtec_dbg_unlock_version_update</a> (struct switchtec_dev *dev, uint32_t serial, uint32_t ver_sec_unlock, struct <a class="el" href="structswitchtec__pubkey.html">switchtec_pubkey</a> *public_key, struct <a class="el" href="structswitchtec__signature.html">switchtec_signature</a> *signature)</td></tr>
<tr class="memdesc:gabafaf69d056cc0fc2527febe6e3b56d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update firmware debug secure unlock version number.  <a href="group__mfg.html#gabafaf69d056cc0fc2527febe6e3b56d0">More...</a><br /></td></tr>
<tr class="separator:gabafaf69d056cc0fc2527febe6e3b56d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8ddd60cc234b9fa35a59af625746610f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mfg.html#ga8ddd60cc234b9fa35a59af625746610f">switchtec_read_sec_cfg_file</a> (FILE *setting_file, struct <a class="el" href="structswitchtec__security__cfg__set.html">switchtec_security_cfg_set</a> *set)</td></tr>
<tr class="memdesc:ga8ddd60cc234b9fa35a59af625746610f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read security settings from config file.  <a href="group__mfg.html#ga8ddd60cc234b9fa35a59af625746610f">More...</a><br /></td></tr>
<tr class="separator:ga8ddd60cc234b9fa35a59af625746610f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1f3c5eb83c56032911a09809d0628d6f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mfg.html#ga1f3c5eb83c56032911a09809d0628d6f">switchtec_kmsk_set</a> (struct switchtec_dev *dev, struct <a class="el" href="structswitchtec__pubkey.html">switchtec_pubkey</a> *public_key, struct <a class="el" href="structswitchtec__signature.html">switchtec_signature</a> *signature, struct <a class="el" href="structswitchtec__kmsk.html">switchtec_kmsk</a> *kmsk)</td></tr>
<tr class="memdesc:ga1f3c5eb83c56032911a09809d0628d6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set KMSK entry KMSK stands for Key Manifest Secure Key. It is a key used to verify Key Manifest partition, which contains keys to verify all other partitions.  <a href="group__mfg.html#ga1f3c5eb83c56032911a09809d0628d6f">More...</a><br /></td></tr>
<tr class="separator:ga1f3c5eb83c56032911a09809d0628d6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaad80c981f6d95901197de2b45024cb7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mfg.html#gaaad80c981f6d95901197de2b45024cb7">switchtec_read_kmsk_file</a> (FILE *kmsk_file, struct <a class="el" href="structswitchtec__kmsk.html">switchtec_kmsk</a> *kmsk)</td></tr>
<tr class="memdesc:gaaad80c981f6d95901197de2b45024cb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read KMSK data from KMSK file.  <a href="group__mfg.html#gaaad80c981f6d95901197de2b45024cb7">More...</a><br /></td></tr>
<tr class="separator:gaaad80c981f6d95901197de2b45024cb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4dce194ae3592c20ff63a4998e11deb8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mfg.html#ga4dce194ae3592c20ff63a4998e11deb8">switchtec_read_signature_file</a> (FILE *sig_file, struct <a class="el" href="structswitchtec__signature.html">switchtec_signature</a> *signature)</td></tr>
<tr class="memdesc:ga4dce194ae3592c20ff63a4998e11deb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read signature data from signature file.  <a href="group__mfg.html#ga4dce194ae3592c20ff63a4998e11deb8">More...</a><br /></td></tr>
<tr class="separator:ga4dce194ae3592c20ff63a4998e11deb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga08f2125b413f16253844f8d7062d97c8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mfg.html#ga08f2125b413f16253844f8d7062d97c8">switchtec_security_state_has_kmsk</a> (struct <a class="el" href="structswitchtec__security__cfg__state.html">switchtec_security_cfg_state</a> *state, struct <a class="el" href="structswitchtec__kmsk.html">switchtec_kmsk</a> *kmsk)</td></tr>
<tr class="memdesc:ga08f2125b413f16253844f8d7062d97c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if secure config already has a KMSK entry KMSK stands for Key Manifest Secure Key. It is a key used to verify Key Manifest partition, which contains keys used to verify all other partitions.  <a href="group__mfg.html#ga08f2125b413f16253844f8d7062d97c8">More...</a><br /></td></tr>
<tr class="separator:ga08f2125b413f16253844f8d7062d97c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Switchtec core library functions for mfg operations. </p>

<p>Definition in file <a class="el" href="mfg_8c_source.html">mfg.c</a>.</p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
